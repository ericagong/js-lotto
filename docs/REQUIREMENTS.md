## TDD 진행 방향 설정

우선 v1. 가장 작은 버전의 핵심 기능 구현 -> v2. 확장.
세부 기능으로 나눠 구현한 뒤, 구현 과정에서 기능 단위 리팩토링.
리팩토링 시, (1) 재사용성 (2) 가독성 (3) 성능 순으로 우선순위 두고 진행.

- v1. 로또 한 장을 발행하고, 당첨 등수 통계와 총 수익률을 반환한다.
- v2. 로또 여러 장을 발행하고, 당첨 등수 통계와 총 수익률을 반환한다.
- v3. UI 로직 추가.

## V1 기능 분리 및 구체화 + 기능 단위 리팩토링

[feature1] 로또 한 장을 발행한다.

- 1-45 사이 임의의 숫자 6개를 중복 없이 생성한다.
- Lotto 객체를 생성하며, 유효성을 검사한다.
  V lottoNumbers가 배열 형태가 아니면, 에러를 발생시킨다.
  V lottoNumbers 배열 내 원소가 숫자 형태가 아니면, 에러를 발생시킨다.
  V 1-45 사이 숫자가 아니면, 에러를 발생시킨다.
  V 숫자 6개가 아니라면, 에러를 발생시킨다.
  V 숫자 간 중복이 있는 경우, 에러를 발생시킨다.

[V] Lotto of 메소드 추가해 의존성 낮추기

[feature2] 당첨 여부를 판단한다.

- 로또 당첨 번호와 보너스 번호를 가진 WinningLotto를 기반으로 Lotto 당첨 여부를 확인한다.
- WinningLotto 객체를 생성하며, 유효성을 검사한다.
  V bonusNumber가 숫자 형태가 아니면, 에러를 발생시킨다.
  V bonusNumber가 1-45 범위 밖이면, 에러를 발생시킨다.
  V bonusNumber가 lottoNumbers와 중복되면, 에러를 발생시킨다.
- Rank 객체를 생성한다.
  V rank가 숫자 형태가 아니면, 에러를 발생시킨다.
  V rank가 1-6 범위 밖이면, 에러를 발생시킨다.

[V] getRank 메소드 세부 메소드로 분리하기

[feature3] 당첨 등수 통계와 총 수익률을 반환한다.

- Rank 객체를 세어 당첨 등수 통계를 반환한다.
- Rank 객체로부터 총 상금을 구한다.
- 총 구매액을 구한다.
- 총 수익률을 반환한다.

[V] domain > models 폴더로 모델들 분리하기

(UI)

- 총 수익률은 소수 둘째 자리 반올림하고 %를 붙인다.
- 당첨 등수 통계에 matchCount, isBonusMatch 정보를 추가한다.

## 구현 순서 지정

(1) 구현 용이성 (2) 최종 상태 근접 여부에 근거해 기능 구현 순서를 지정한다.
f1 -> f2 -> f3

## V1 -> V2 기능 확장

[feature1] 로또 발행 한 장 -> 여러 장

- PurchasingPrice로 구매가능한 최대한의 로또 개수만큼 로또를 발행한다.
  V purchasingPrice가 숫자 형태가 아니라면, 에러를 발생시킨다.
  V purchasingPrice가 음수라면, 에러를 발생시킨다.
  V purchasingPrice로 로또를 하나도 못사는 경우, 에러를 발생시킨다.
  V purchasingPrice가 10만원 초과인 경우, 에러를 발생시킨다.

[feature2] 당첨 여부 판단 한 장 -> 여러 장

- 여러 장의 로또에 대해 당첨 여부를 판단해 ranks에 저장한다.

[feature3] 여러 장에 대해 당첨 등수 통계와 총 수익률을 반환한다.

- 여러 장에 대한 당첨 등수 통계를 반환한다.
- 총 수익률을 반환한다.

## Step2 변경된 요구 사항 반영

[feature1] 로또 발행

- 로또 번호 오름차순 정렬

[feature4] 재시작/종료 여부 사용자 입력 받기

- 사용자로부터 재시작/종료 여부 입력 받기

[all] 에러 처리

- 사용자가 잘못된 값을 입력한 경우 throw 문으로 에러 발생시키고, 에러 메시지 출력 후 해당 부분부터 입력 다시 받기
  V purchasingPrice를 잘못 입력한 경우
  V winningLottoNumbers를 잘못 입력한 경우
  V BonusNumber를 잘못 입력한 경우
  V 그 외 Error 발생한 경우, 앱 종료
