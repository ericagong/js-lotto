# 📍 구현 방향성

- 가장 작은 버전 핵심 기능 우선 구현 -> 복잡성 및 디테일 추가해 기능 확장.
- [phase1] 로또 한 장을 발행하고 당첨 등수, 금액, 수익률을 반환.
- [phase2] 로또 한 장 -> 여러 장, 수익률 -> 누적 수익률.

# 📍 [phase1] 가장 작은 버전의 핵심 기능

## 🎯 1. 기능 분리

- [feature1] 로또 한 장 발행.
- [feature2] 로또 당첨 여부 확인.
- [feature3] 당첨 등수와 금액 반환.
- [feature4] 수익률 계산해 반환.

## 📝 2. 기능 구체화

[feature1] 로또 한 장 발행.
[X] 45개의 숫자 중, 중복 없이 6개의 숫자 선택.
[X] 6개의 숫자 배열을 상태로 가지는 로또 객체 반환.
[X] 예외 케이스 처리하기.

> > 💡배열 형태 아닌 인자.
> > 💡길이 6이 아닌 배열.
> > 💡배열 원소 모두 숫자 아닌 경우.
> > 💡배열 슷자 원소가 [1, 45] 사이 아닌 경우.
> > 💡배열 슷자 원소가 중복된 경우.

[feature2] 로또 당첨 여부 확인.
[X] 당첨 번호와 비교해 일치 개수 반환.
[X] 당첨 번호 일치 개수가 5개인 경우, 보너스 번호와 일치 여부 확인.
[X] 예외 케이스 처리하기.

> > 1.  당첨 번호 유효성 검사.
> >     💡배열 형태 아닌 인자.
> >     💡길이 6이 아닌 배열.
> >     💡배열 원소 모두 숫자 아닌 경우.
> >     💡배열 슷자 원소가 [1, 45] 사이 아닌 경우.
> >     💡배열 슷자 원소가 중복된 경우.
> > 2.  보너스 번호 유효성 검사.
> >     💡보너스 번호가 숫자 형태 아닌 경우.
> >     💡보너스 번호가 [1, 45] 사이 아닌 경우.
> >     💡당첨 번호와 보너스 번호 중복.
> > 3.  로또 당첨 여부 확인 검사.
> >     💡당첨 번호/보너스 번호가 setting 되지 않은 경우.

[feature3] 당첨 등수와 금액 반환.
[X] 당첨 등수와 당첨 금액 반환.
[X] 예외 케이스 처리하기.

[feature4] 당첨 통계와 수익률 반환.
[ ] 일치 개수, 금액, 당첨 로또 개수 반환.
[ ] 누적 수익률 반환.

> > 💡당첨 되지 않은 경우, 6등 당첨 금액 0원.

[feature4] 수익률 계산해 반환.
[X] 미당첨 시, 0 반환.
[X] 당첨 시, 누적 당첨금/구매금액(로또 한 장: 당첨금/1_000) 반환.
[X] 예외 케이스 처리하기.

> > 💡당첨금 = 0.
> > 💡구매금액 = 0.
> > 💡% 소수점 처리.

## 🔧 3. 기능별 리팩토링 고려 지점

💡 리팩토링은 기능 단위로 하자. 너무 뚱뚱하면, 힘들다.
💡 X 완료 | 진행중 개수가 feature와 동일해지면 완료.

[all] 추가 반영 사항.
[X] Runtime 에러 객체 구현.
[4] IIFE -> 일반 함수로 변경.
[4] 도메인 폴더 분리.
[4] 에러 별 별도 객체 구현.
[3] 테스트 코드 변수/함수 의도 드러나게 네이밍 수정.
[3] 테스트 코드 리팩토링 시 (1) 가독성 (2) 재사용성 우선 순위로 고려.

[feature1] 로또 한 장 발행.
[X] 전략 패턴 사용해, IssueStrategy로 예측 불가능한 부분 분리.
[X] Lotto 객체에서 유효성 체크 로직 분리.

[feature2] 로또 당첨 여부 확인.
[X] 로또 - 당첨 로또 상속 구조 도입.
[X] Lotto에도 유효성 체크 다시 추가.

[feature3] 당첨 등수와 금액 반환.
[X] 올바른 등수와 금액이 반환되는지 확인하는 테스트 코드 추가.
[X] ResultChecker 객체 분리.

[feature4] 수익률 계산해 반환.

[Controller] LotteryPlatform
[X] LotteryPlatform 유효성 검사 LotteryMachine으로 이동.

[View]PromptView
[X] View 객체 생성.

## ❓ 4. 기능별 질문 사항

[feature1] 로또 한 장 발행.
[ ] 단위 테스트의 범위

[feature2] 로또 당첨 여부 확인.
[ ] 예측 불가능한 부분 분리의 순기능 <-> 배보다 배꼽이 큰가?
[ ] test code에서 식별자 유효 범위.
[ ] issueStrategy, Lotto의 중복 체크. -> Lotto 객체에서도 유효성 검증. issue에서도 유효성 검증 필요하다고 생각.

# 📍 [phase2] 기능 확장

- 로또 한 장 -> 여러 장,
- 수익률 -> 누적 수익률.

## 🎯 1. 기능 확장

- [feature1] 로또 한 장 발행 -> 금액에 따라 로또 여러 장 발행.
- [feature2] 로또 당첨 여부 확인.
- [feature3] 당첨 등수와 금액 반환.
- [feature4] 수익률 계산해 반환. -> 누적 수익률 계산해 발행.

## 🔧 2. 기능별 리팩토링 고려 지점

- [x] Test layer와 product layer 분리.
- [x] View에서 데이터 타입 변환로직을 Controller로 옯기기.
- [ ] 누적 수익률 테스트 코드 추가.
